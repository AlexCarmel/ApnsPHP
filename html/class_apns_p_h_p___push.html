<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>apns-php: ApnsPHP_Push Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">apns-php
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_apns_p_h_p___push.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">ApnsPHP_Push Class Reference<div class="ingroups"><a class="el" href="group___apns_p_h_p___push.html">Push</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The Push Notification Provider.  
 <a href="class_apns_p_h_p___push.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ApnsPHP_Push:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push__inherit__graph.png" border="0" usemap="#_apns_p_h_p___push_inherit__map" alt="Inheritance graph"/></div>
<map name="_apns_p_h_p___push_inherit__map" id="_apns_p_h_p___push_inherit__map">
<area shape="rect" id="node3" href="class_apns_p_h_p___push___server.html" title="The Push Notification Server Provider. " alt="" coords="19,747,159,1069"/><area shape="rect" id="node2" href="class_apns_p_h_p___abstract.html" title="Abstract class: this is the superclass for all Apple Push Notification Service classes. " alt="" coords="8,6,171,381"/></map>
</div>
<div class="dynheader">
Collaboration diagram for ApnsPHP_Push:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push__coll__graph.png" border="0" usemap="#_apns_p_h_p___push_coll__map" alt="Collaboration graph"/></div>
<map name="_apns_p_h_p___push_coll__map" id="_apns_p_h_p___push_coll__map">
<area shape="rect" id="node2" href="class_apns_p_h_p___abstract.html" title="Abstract class: this is the superclass for all Apple Push Notification Service classes. " alt="" coords="8,131,171,495"/><area shape="rect" id="node3" href="interface_apns_p_h_p___log___interface.html" title="The Log Interface. " alt="" coords="29,6,149,71"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac018cd9443834d169616e64dbd91795b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#ac018cd9443834d169616e64dbd91795b">add</a> (<a class="el" href="class_apns_p_h_p___message.html">ApnsPHP_Message</a> $message)</td></tr>
<tr class="memdesc:ac018cd9443834d169616e64dbd91795b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a message to the message queue.  <a href="#ac018cd9443834d169616e64dbd91795b">More...</a><br/></td></tr>
<tr class="separator:ac018cd9443834d169616e64dbd91795b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768eb6c89cb999d16b9469ca584d7ce9"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a768eb6c89cb999d16b9469ca584d7ce9">getErrors</a> (boolean $bEmpty=true)</td></tr>
<tr class="memdesc:a768eb6c89cb999d16b9469ca584d7ce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns messages not delivered to the end user because one (or more) error occurred.  <a href="#a768eb6c89cb999d16b9469ca584d7ce9">More...</a><br/></td></tr>
<tr class="separator:a768eb6c89cb999d16b9469ca584d7ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28cb5e78a1805b9a1b643142033dc23b"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a28cb5e78a1805b9a1b643142033dc23b">getQueue</a> (boolean $bEmpty=true)</td></tr>
<tr class="memdesc:a28cb5e78a1805b9a1b643142033dc23b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns messages in the message queue.  <a href="#a28cb5e78a1805b9a1b643142033dc23b">More...</a><br/></td></tr>
<tr class="separator:a28cb5e78a1805b9a1b643142033dc23b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a913c8a2582c6ede80899a6ef079745d0"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a913c8a2582c6ede80899a6ef079745d0">getSendRetryTimes</a> ()</td></tr>
<tr class="memdesc:a913c8a2582c6ede80899a6ef079745d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the send retry time value.  <a href="#a913c8a2582c6ede80899a6ef079745d0">More...</a><br/></td></tr>
<tr class="separator:a913c8a2582c6ede80899a6ef079745d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9399f5ec7881c5d18173def8068108e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#ae9399f5ec7881c5d18173def8068108e">send</a> ()</td></tr>
<tr class="memdesc:ae9399f5ec7881c5d18173def8068108e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends all messages in the message queue to Apple Push Notification Service.  <a href="#ae9399f5ec7881c5d18173def8068108e">More...</a><br/></td></tr>
<tr class="separator:ae9399f5ec7881c5d18173def8068108e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc1ec1138b9f16f3133031875c7dcb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a4fc1ec1138b9f16f3133031875c7dcb5">setSendRetryTimes</a> (integer $nRetryTimes)</td></tr>
<tr class="memdesc:a4fc1ec1138b9f16f3133031875c7dcb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the send retry times value.  <a href="#a4fc1ec1138b9f16f3133031875c7dcb5">More...</a><br/></td></tr>
<tr class="separator:a4fc1ec1138b9f16f3133031875c7dcb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_apns_p_h_p___abstract"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_apns_p_h_p___abstract')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_apns_p_h_p___abstract.html">ApnsPHP_Abstract</a></td></tr>
<tr class="memitem:aae6a84652eefad4159d44019155cb648 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#aae6a84652eefad4159d44019155cb648">__construct</a> (integer $nEnvironment, string $sProviderCertificateFile)</td></tr>
<tr class="memdesc:aae6a84652eefad4159d44019155cb648 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aae6a84652eefad4159d44019155cb648">More...</a><br/></td></tr>
<tr class="separator:aae6a84652eefad4159d44019155cb648 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1396bf9b5defe9fa844a63b5cd40ac0e inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a1396bf9b5defe9fa844a63b5cd40ac0e">connect</a> ()</td></tr>
<tr class="memdesc:a1396bf9b5defe9fa844a63b5cd40ac0e inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to Apple Push Notification service server.  <a href="#a1396bf9b5defe9fa844a63b5cd40ac0e">More...</a><br/></td></tr>
<tr class="separator:a1396bf9b5defe9fa844a63b5cd40ac0e inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df1b1c18902634d60f5fb06d3c5f4a9 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a7df1b1c18902634d60f5fb06d3c5f4a9">disconnect</a> ()</td></tr>
<tr class="memdesc:a7df1b1c18902634d60f5fb06d3c5f4a9 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects from Apple Push Notifications service server.  <a href="#a7df1b1c18902634d60f5fb06d3c5f4a9">More...</a><br/></td></tr>
<tr class="separator:a7df1b1c18902634d60f5fb06d3c5f4a9 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703ee5c73189fe359f7e89118f563cb6 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a703ee5c73189fe359f7e89118f563cb6">getCertificateAuthority</a> ()</td></tr>
<tr class="memdesc:a703ee5c73189fe359f7e89118f563cb6 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Root Certification Authority file path.  <a href="#a703ee5c73189fe359f7e89118f563cb6">More...</a><br/></td></tr>
<tr class="separator:a703ee5c73189fe359f7e89118f563cb6 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7b8b18e9f8001351ecf858154831ae inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#afe7b8b18e9f8001351ecf858154831ae">getConnectRetryInterval</a> ()</td></tr>
<tr class="memdesc:afe7b8b18e9f8001351ecf858154831ae inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the connect retry interval.  <a href="#afe7b8b18e9f8001351ecf858154831ae">More...</a><br/></td></tr>
<tr class="separator:afe7b8b18e9f8001351ecf858154831ae inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52897493c59f7afd85fafc81e0e16751 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a52897493c59f7afd85fafc81e0e16751">getConnectRetryTimes</a> ()</td></tr>
<tr class="memdesc:a52897493c59f7afd85fafc81e0e16751 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the connect retry time value.  <a href="#a52897493c59f7afd85fafc81e0e16751">More...</a><br/></td></tr>
<tr class="separator:a52897493c59f7afd85fafc81e0e16751 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab18d0742be9db395bfd6226e348a994d inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#ab18d0742be9db395bfd6226e348a994d">getConnectTimeout</a> ()</td></tr>
<tr class="memdesc:ab18d0742be9db395bfd6226e348a994d inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the connection timeout.  <a href="#ab18d0742be9db395bfd6226e348a994d">More...</a><br/></td></tr>
<tr class="separator:ab18d0742be9db395bfd6226e348a994d inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82a5c2d611f7d461f0e4c0208b78ce8 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_apns_p_h_p___log___interface.html">ApnsPHP_Log_Interface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#ae82a5c2d611f7d461f0e4c0208b78ce8">getLogger</a> ()</td></tr>
<tr class="memdesc:ae82a5c2d611f7d461f0e4c0208b78ce8 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Logger instance.  <a href="#ae82a5c2d611f7d461f0e4c0208b78ce8">More...</a><br/></td></tr>
<tr class="separator:ae82a5c2d611f7d461f0e4c0208b78ce8 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546104f7ed0b728e8108bb2aa76ad13f inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a546104f7ed0b728e8108bb2aa76ad13f">getSocketSelectTimeout</a> ()</td></tr>
<tr class="memdesc:a546104f7ed0b728e8108bb2aa76ad13f inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the TCP socket select timeout.  <a href="#a546104f7ed0b728e8108bb2aa76ad13f">More...</a><br/></td></tr>
<tr class="separator:a546104f7ed0b728e8108bb2aa76ad13f inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bf99f3710bda62007fc77c897390022 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a7bf99f3710bda62007fc77c897390022">getWriteInterval</a> ()</td></tr>
<tr class="memdesc:a7bf99f3710bda62007fc77c897390022 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the write interval.  <a href="#a7bf99f3710bda62007fc77c897390022">More...</a><br/></td></tr>
<tr class="separator:a7bf99f3710bda62007fc77c897390022 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83cf98e475eca85c7f05cb6a89713d67 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a83cf98e475eca85c7f05cb6a89713d67">setConnectRetryInterval</a> (integer $nRetryInterval)</td></tr>
<tr class="memdesc:a83cf98e475eca85c7f05cb6a89713d67 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the connect retry interval.  <a href="#a83cf98e475eca85c7f05cb6a89713d67">More...</a><br/></td></tr>
<tr class="separator:a83cf98e475eca85c7f05cb6a89713d67 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3c89943cf2f2c70e6fb7aa3d2cc727 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a2b3c89943cf2f2c70e6fb7aa3d2cc727">setConnectRetryTimes</a> (integer $nRetryTimes)</td></tr>
<tr class="memdesc:a2b3c89943cf2f2c70e6fb7aa3d2cc727 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the connect retry times value.  <a href="#a2b3c89943cf2f2c70e6fb7aa3d2cc727">More...</a><br/></td></tr>
<tr class="separator:a2b3c89943cf2f2c70e6fb7aa3d2cc727 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad070cb1e77347cd053720a34be084668 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#ad070cb1e77347cd053720a34be084668">setConnectTimeout</a> (integer $nTimeout)</td></tr>
<tr class="memdesc:ad070cb1e77347cd053720a34be084668 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the connection timeout.  <a href="#ad070cb1e77347cd053720a34be084668">More...</a><br/></td></tr>
<tr class="separator:ad070cb1e77347cd053720a34be084668 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4883e066cf88b31779008a79300b6ac9 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a4883e066cf88b31779008a79300b6ac9">setLogger</a> (<a class="el" href="interface_apns_p_h_p___log___interface.html">ApnsPHP_Log_Interface</a> $logger)</td></tr>
<tr class="memdesc:a4883e066cf88b31779008a79300b6ac9 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Logger instance to use for logging purpose.  <a href="#a4883e066cf88b31779008a79300b6ac9">More...</a><br/></td></tr>
<tr class="separator:a4883e066cf88b31779008a79300b6ac9 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a3909d2fb759bbf159503e5889b5588 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a0a3909d2fb759bbf159503e5889b5588">setProviderCertificatePassphrase</a> (string $sProviderCertificatePassphrase)</td></tr>
<tr class="memdesc:a0a3909d2fb759bbf159503e5889b5588 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Provider Certificate passphrase.  <a href="#a0a3909d2fb759bbf159503e5889b5588">More...</a><br/></td></tr>
<tr class="separator:a0a3909d2fb759bbf159503e5889b5588 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c1f083d92c38eba28ef39aa46883c35 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a5c1f083d92c38eba28ef39aa46883c35">setRootCertificationAuthority</a> (string $sRootCertificationAuthorityFile)</td></tr>
<tr class="memdesc:a5c1f083d92c38eba28ef39aa46883c35 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Root Certification Authority file.  <a href="#a5c1f083d92c38eba28ef39aa46883c35">More...</a><br/></td></tr>
<tr class="separator:a5c1f083d92c38eba28ef39aa46883c35 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d75f85aec324ee178c5bcd903ac7676 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a6d75f85aec324ee178c5bcd903ac7676">setSocketSelectTimeout</a> (integer $nSelectTimeout)</td></tr>
<tr class="memdesc:a6d75f85aec324ee178c5bcd903ac7676 inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the TCP socket select timeout.  <a href="#a6d75f85aec324ee178c5bcd903ac7676">More...</a><br/></td></tr>
<tr class="separator:a6d75f85aec324ee178c5bcd903ac7676 inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a747d6530c338832a1be685508519d23b inherit pub_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a747d6530c338832a1be685508519d23b">setWriteInterval</a> (integer $nWriteInterval)</td></tr>
<tr class="memdesc:a747d6530c338832a1be685508519d23b inherit pub_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the write interval.  <a href="#a747d6530c338832a1be685508519d23b">More...</a><br/></td></tr>
<tr class="separator:a747d6530c338832a1be685508519d23b inherit pub_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a74b57f63d77ece5116b5182aa34c9730"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a74b57f63d77ece5116b5182aa34c9730">COMMAND_PUSH</a> = 1</td></tr>
<tr class="memdesc:a74b57f63d77ece5116b5182aa34c9730"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Payload command.  <a href="#a74b57f63d77ece5116b5182aa34c9730">More...</a><br/></td></tr>
<tr class="separator:a74b57f63d77ece5116b5182aa34c9730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab55825cc178fc59b660002acd8d5a116"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#ab55825cc178fc59b660002acd8d5a116">ERROR_RESPONSE_COMMAND</a> = 8</td></tr>
<tr class="memdesc:ab55825cc178fc59b660002acd8d5a116"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Error-response command code.  <a href="#ab55825cc178fc59b660002acd8d5a116">More...</a><br/></td></tr>
<tr class="separator:ab55825cc178fc59b660002acd8d5a116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad38bede6deb2536cc02d28f08beba41f"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#ad38bede6deb2536cc02d28f08beba41f">ERROR_RESPONSE_SIZE</a> = 6</td></tr>
<tr class="memdesc:ad38bede6deb2536cc02d28f08beba41f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Error-response packet size.  <a href="#ad38bede6deb2536cc02d28f08beba41f">More...</a><br/></td></tr>
<tr class="separator:ad38bede6deb2536cc02d28f08beba41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0991482ec58935b62b607561f469b3e6"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a0991482ec58935b62b607561f469b3e6">STATUS_CODE_INTERNAL_ERROR</a> = 999</td></tr>
<tr class="memdesc:a0991482ec58935b62b607561f469b3e6"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Status code for internal error (not Apple).  <a href="#a0991482ec58935b62b607561f469b3e6">More...</a><br/></td></tr>
<tr class="separator:a0991482ec58935b62b607561f469b3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_class_apns_p_h_p___abstract"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_class_apns_p_h_p___abstract')"><img src="closed.png" alt="-"/>&#160;Data Fields inherited from <a class="el" href="class_apns_p_h_p___abstract.html">ApnsPHP_Abstract</a></td></tr>
<tr class="memitem:aa10dc8c2d2d466ec74eed51f813b3b38 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#aa10dc8c2d2d466ec74eed51f813b3b38">CONNECT_RETRY_INTERVAL</a> = 1000000</td></tr>
<tr class="memdesc:aa10dc8c2d2d466ec74eed51f813b3b38 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Default connect retry interval in micro seconds.  <a href="#aa10dc8c2d2d466ec74eed51f813b3b38">More...</a><br/></td></tr>
<tr class="separator:aa10dc8c2d2d466ec74eed51f813b3b38 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95d91338e9d3a030fcd523139bfb41d inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#ae95d91338e9d3a030fcd523139bfb41d">DEVICE_BINARY_SIZE</a> = 32</td></tr>
<tr class="memdesc:ae95d91338e9d3a030fcd523139bfb41d inherit pub_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Device token length.  <a href="#ae95d91338e9d3a030fcd523139bfb41d">More...</a><br/></td></tr>
<tr class="separator:ae95d91338e9d3a030fcd523139bfb41d inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e894618e7beaa3d8eae1a30746d6a6 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a85e894618e7beaa3d8eae1a30746d6a6">ENVIRONMENT_PRODUCTION</a> = 0</td></tr>
<tr class="memdesc:a85e894618e7beaa3d8eae1a30746d6a6 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Production environment.  <a href="#a85e894618e7beaa3d8eae1a30746d6a6">More...</a><br/></td></tr>
<tr class="separator:a85e894618e7beaa3d8eae1a30746d6a6 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14cf226f4b5c1e0d567301218e2777e0 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a14cf226f4b5c1e0d567301218e2777e0">ENVIRONMENT_SANDBOX</a> = 1</td></tr>
<tr class="memdesc:a14cf226f4b5c1e0d567301218e2777e0 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Sandbox environment.  <a href="#a14cf226f4b5c1e0d567301218e2777e0">More...</a><br/></td></tr>
<tr class="separator:a14cf226f4b5c1e0d567301218e2777e0 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa92d2b31378349d954da83ecc1ea5406 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#aa92d2b31378349d954da83ecc1ea5406">SOCKET_SELECT_TIMEOUT</a> = 1000000</td></tr>
<tr class="memdesc:aa92d2b31378349d954da83ecc1ea5406 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Default socket select timeout in micro seconds.  <a href="#aa92d2b31378349d954da83ecc1ea5406">More...</a><br/></td></tr>
<tr class="separator:aa92d2b31378349d954da83ecc1ea5406 inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2980b7f9049d2bb9a3891d0239ce9e5d inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a2980b7f9049d2bb9a3891d0239ce9e5d">WRITE_INTERVAL</a> = 10000</td></tr>
<tr class="memdesc:a2980b7f9049d2bb9a3891d0239ce9e5d inherit pub_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>integer</b> Default write interval in micro seconds.  <a href="#a2980b7f9049d2bb9a3891d0239ce9e5d">More...</a><br/></td></tr>
<tr class="separator:a2980b7f9049d2bb9a3891d0239ce9e5d inherit pub_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:afcfd2fc4859336fbbcb68b15bfac7ca1"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#afcfd2fc4859336fbbcb68b15bfac7ca1">_getBinaryNotification</a> (string $sDeviceToken, string $sPayload, integer $nMessageID=0, integer $nExpire=604800)</td></tr>
<tr class="memdesc:afcfd2fc4859336fbbcb68b15bfac7ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a binary notification from a device token and a JSON-encoded payload.  <a href="#afcfd2fc4859336fbbcb68b15bfac7ca1">More...</a><br/></td></tr>
<tr class="separator:afcfd2fc4859336fbbcb68b15bfac7ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a381cee411cee3e7d1c3220fa45d47eb2"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a381cee411cee3e7d1c3220fa45d47eb2">_parseErrorMessage</a> (string $sErrorMessage)</td></tr>
<tr class="memdesc:a381cee411cee3e7d1c3220fa45d47eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the error message.  <a href="#a381cee411cee3e7d1c3220fa45d47eb2">More...</a><br/></td></tr>
<tr class="separator:a381cee411cee3e7d1c3220fa45d47eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe538ea4442f608db7f2c54948eb6ab"><td class="memItemLeft" align="right" valign="top">array null&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a2fe538ea4442f608db7f2c54948eb6ab">_readErrorMessage</a> ()</td></tr>
<tr class="memdesc:a2fe538ea4442f608db7f2c54948eb6ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an error message (if present) from the main stream.  <a href="#a2fe538ea4442f608db7f2c54948eb6ab">More...</a><br/></td></tr>
<tr class="separator:a2fe538ea4442f608db7f2c54948eb6ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af366dce8b0b73dc941f0178795ea8547"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#af366dce8b0b73dc941f0178795ea8547">_removeMessageFromQueue</a> (integer $nMessageID, boolean $bError=false)</td></tr>
<tr class="memdesc:af366dce8b0b73dc941f0178795ea8547"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a message from the message queue.  <a href="#af366dce8b0b73dc941f0178795ea8547">More...</a><br/></td></tr>
<tr class="separator:af366dce8b0b73dc941f0178795ea8547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6242fa2edfb97a92aea050f0f119da7d"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a6242fa2edfb97a92aea050f0f119da7d">_updateQueue</a> (array $aErrorMessage=null)</td></tr>
<tr class="memdesc:a6242fa2edfb97a92aea050f0f119da7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for error message and deletes messages successfully sent from message queue.  <a href="#a6242fa2edfb97a92aea050f0f119da7d">More...</a><br/></td></tr>
<tr class="separator:a6242fa2edfb97a92aea050f0f119da7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_apns_p_h_p___abstract"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_apns_p_h_p___abstract')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_apns_p_h_p___abstract.html">ApnsPHP_Abstract</a></td></tr>
<tr class="memitem:a56e16b11db21be37c5f50850d287ff21 inherit pro_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a56e16b11db21be37c5f50850d287ff21">_connect</a> ()</td></tr>
<tr class="memdesc:a56e16b11db21be37c5f50850d287ff21 inherit pro_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to Apple Push Notification service server.  <a href="#a56e16b11db21be37c5f50850d287ff21">More...</a><br/></td></tr>
<tr class="separator:a56e16b11db21be37c5f50850d287ff21 inherit pro_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e9fdc68fece1907733a1e76f667622f inherit pro_methods_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a> (string $sMessage)</td></tr>
<tr class="memdesc:a6e9fdc68fece1907733a1e76f667622f inherit pro_methods_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs a message through the Logger.  <a href="#a6e9fdc68fece1907733a1e76f667622f">More...</a><br/></td></tr>
<tr class="separator:a6e9fdc68fece1907733a1e76f667622f inherit pro_methods_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aafc113ef872b9af567ea2a1efa246c1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#aafc113ef872b9af567ea2a1efa246c1a">$_aErrorResponseMessages</a></td></tr>
<tr class="memdesc:aafc113ef872b9af567ea2a1efa246c1a"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>array</b> Error-response messages.  <a href="#aafc113ef872b9af567ea2a1efa246c1a">More...</a><br/></td></tr>
<tr class="separator:aafc113ef872b9af567ea2a1efa246c1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a71aa0cf11f9c55a9dc641891e60e20"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a7a71aa0cf11f9c55a9dc641891e60e20">$_aErrors</a> = array()</td></tr>
<tr class="memdesc:a7a71aa0cf11f9c55a9dc641891e60e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error container.  <a href="#a7a71aa0cf11f9c55a9dc641891e60e20">More...</a><br/></td></tr>
<tr class="separator:a7a71aa0cf11f9c55a9dc641891e60e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1719189fd0c52f6747cbafa055260d19"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a1719189fd0c52f6747cbafa055260d19">$_aMessageQueue</a> = array()</td></tr>
<tr class="memdesc:a1719189fd0c52f6747cbafa055260d19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message queue.  <a href="#a1719189fd0c52f6747cbafa055260d19">More...</a><br/></td></tr>
<tr class="separator:a1719189fd0c52f6747cbafa055260d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109431534e6d7a411266096a7c79cf17"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a109431534e6d7a411266096a7c79cf17">$_aServiceURLs</a></td></tr>
<tr class="memdesc:a109431534e6d7a411266096a7c79cf17"><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>array</b> Service URLs environments.  <a href="#a109431534e6d7a411266096a7c79cf17">More...</a><br/></td></tr>
<tr class="separator:a109431534e6d7a411266096a7c79cf17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd53899bb322e9601a2a91a85b49aa8"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___push.html#a9dd53899bb322e9601a2a91a85b49aa8">$_nSendRetryTimes</a> = 3</td></tr>
<tr class="memdesc:a9dd53899bb322e9601a2a91a85b49aa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send retry times.  <a href="#a9dd53899bb322e9601a2a91a85b49aa8">More...</a><br/></td></tr>
<tr class="separator:a9dd53899bb322e9601a2a91a85b49aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_class_apns_p_h_p___abstract"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_apns_p_h_p___abstract')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_apns_p_h_p___abstract.html">ApnsPHP_Abstract</a></td></tr>
<tr class="memitem:a4dfe522758b48c95d52c2ec5b90fd18f inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a4dfe522758b48c95d52c2ec5b90fd18f">$_aServiceURLs</a> = array()</td></tr>
<tr class="memdesc:a4dfe522758b48c95d52c2ec5b90fd18f inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Container for service URLs environments.  <a href="#a4dfe522758b48c95d52c2ec5b90fd18f">More...</a><br/></td></tr>
<tr class="separator:a4dfe522758b48c95d52c2ec5b90fd18f inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6067fe69133ed8c4abd90c8f902f7ace inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">resource&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a6067fe69133ed8c4abd90c8f902f7ace">$_hSocket</a></td></tr>
<tr class="memdesc:a6067fe69133ed8c4abd90c8f902f7ace inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">SSL Socket.  <a href="#a6067fe69133ed8c4abd90c8f902f7ace">More...</a><br/></td></tr>
<tr class="separator:a6067fe69133ed8c4abd90c8f902f7ace inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571be5a19e4be820a9a496eb8dee140b inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_apns_p_h_p___log___interface.html">ApnsPHP_Log_Interface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a571be5a19e4be820a9a496eb8dee140b">$_logger</a></td></tr>
<tr class="memdesc:a571be5a19e4be820a9a496eb8dee140b inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logger.  <a href="#a571be5a19e4be820a9a496eb8dee140b">More...</a><br/></td></tr>
<tr class="separator:a571be5a19e4be820a9a496eb8dee140b inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a75f7745babfaaae9830cb271fe67a inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a27a75f7745babfaaae9830cb271fe67a">$_nConnectRetryInterval</a></td></tr>
<tr class="memdesc:a27a75f7745babfaaae9830cb271fe67a inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect retry interval in micro seconds.  <a href="#a27a75f7745babfaaae9830cb271fe67a">More...</a><br/></td></tr>
<tr class="separator:a27a75f7745babfaaae9830cb271fe67a inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e4b55f527be51ea20afd8b238c9a8e4 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a0e4b55f527be51ea20afd8b238c9a8e4">$_nConnectRetryTimes</a> = 3</td></tr>
<tr class="memdesc:a0e4b55f527be51ea20afd8b238c9a8e4 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect retry times.  <a href="#a0e4b55f527be51ea20afd8b238c9a8e4">More...</a><br/></td></tr>
<tr class="separator:a0e4b55f527be51ea20afd8b238c9a8e4 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e6588d29e1c30fcc1e01dc713fdee9 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a71e6588d29e1c30fcc1e01dc713fdee9">$_nConnectTimeout</a></td></tr>
<tr class="memdesc:a71e6588d29e1c30fcc1e01dc713fdee9 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect timeout in seconds.  <a href="#a71e6588d29e1c30fcc1e01dc713fdee9">More...</a><br/></td></tr>
<tr class="separator:a71e6588d29e1c30fcc1e01dc713fdee9 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a0ba81b8c4f3a81c10b202eff21eb2 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#af3a0ba81b8c4f3a81c10b202eff21eb2">$_nEnvironment</a></td></tr>
<tr class="memdesc:af3a0ba81b8c4f3a81c10b202eff21eb2 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Active environment.  <a href="#af3a0ba81b8c4f3a81c10b202eff21eb2">More...</a><br/></td></tr>
<tr class="separator:af3a0ba81b8c4f3a81c10b202eff21eb2 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c19aa1d01cd567d2bc66815617e142 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#af2c19aa1d01cd567d2bc66815617e142">$_nSocketSelectTimeout</a></td></tr>
<tr class="memdesc:af2c19aa1d01cd567d2bc66815617e142 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Socket select timeout in micro seconds.  <a href="#af2c19aa1d01cd567d2bc66815617e142">More...</a><br/></td></tr>
<tr class="separator:af2c19aa1d01cd567d2bc66815617e142 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfeea7efb81189119b7d1dcaaa79d27d inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#acfeea7efb81189119b7d1dcaaa79d27d">$_nWriteInterval</a></td></tr>
<tr class="memdesc:acfeea7efb81189119b7d1dcaaa79d27d inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write interval in micro seconds.  <a href="#acfeea7efb81189119b7d1dcaaa79d27d">More...</a><br/></td></tr>
<tr class="separator:acfeea7efb81189119b7d1dcaaa79d27d inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa63034430728780713f6583b9cd6dfd1 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#aa63034430728780713f6583b9cd6dfd1">$_sProviderCertificateFile</a></td></tr>
<tr class="memdesc:aa63034430728780713f6583b9cd6dfd1 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provider certificate file with key (Bundled PEM).  <a href="#aa63034430728780713f6583b9cd6dfd1">More...</a><br/></td></tr>
<tr class="separator:aa63034430728780713f6583b9cd6dfd1 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf866943bf8e7d359add41bb547fe79c inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#abf866943bf8e7d359add41bb547fe79c">$_sProviderCertificatePassphrase</a></td></tr>
<tr class="memdesc:abf866943bf8e7d359add41bb547fe79c inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provider certificate passphrase.  <a href="#abf866943bf8e7d359add41bb547fe79c">More...</a><br/></td></tr>
<tr class="separator:abf866943bf8e7d359add41bb547fe79c inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ccbe72298e61467431d83d333a09482 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apns_p_h_p___abstract.html#a0ccbe72298e61467431d83d333a09482">$_sRootCertificationAuthorityFile</a></td></tr>
<tr class="memdesc:a0ccbe72298e61467431d83d333a09482 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="mdescLeft">&#160;</td><td class="mdescRight">Root certification authority file.  <a href="#a0ccbe72298e61467431d83d333a09482">More...</a><br/></td></tr>
<tr class="separator:a0ccbe72298e61467431d83d333a09482 inherit pro_attribs_class_apns_p_h_p___abstract"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The Push Notification Provider. </p>
<p>The class manages a message queue and sends notifications payload to Apple Push Notification Service. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00033">33</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="afcfd2fc4859336fbbcb68b15bfac7ca1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string _getBinaryNotification </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$sDeviceToken</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$sPayload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>$nMessageID</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>$nExpire</em> = <code>604800</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate a binary notification from a device token and a JSON-encoded payload. </p>
<dl class="section see"><dt>See Also</dt><dd><a href="http://tinyurl.com/ApplePushNotificationBinary">http://tinyurl.com/ApplePushNotificationBinary</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$sDeviceToken</td><td>The device token. </td></tr>
    <tr><td class="paramname">$sPayload</td><td>The JSON-encoded payload. </td></tr>
    <tr><td class="paramname">$nMessageID</td><td>[optional] Message unique ID. </td></tr>
    <tr><td class="paramname">$nExpire</td><td>[optional] Seconds, starting from now, that identifies when the notification is no longer valid and can be discarded. Pass a negative value (-1 for example) to request that APNs not store the notification at all. Default is 86400 * 7, 7 days. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A binary notification. </dd></dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00263">263</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00093">add()</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        $nTokenLength = strlen($sDeviceToken);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        $nPayloadLength = strlen($sPayload);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        $sRet  = pack(<span class="stringliteral">&#39;CNNnH*&#39;</span>, self::COMMAND_PUSH, $nMessageID, $nExpire &gt; 0 ? time() + $nExpire : 0, self::DEVICE_BINARY_SIZE, $sDeviceToken);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        $sRet .= pack(<span class="charliteral">&#39;n&#39;</span>, $nPayloadLength);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        $sRet .= $sPayload;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">return</span> $sRet;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_afcfd2fc4859336fbbcb68b15bfac7ca1_icgraph.png" border="0" usemap="#class_apns_p_h_p___push_afcfd2fc4859336fbbcb68b15bfac7ca1_icgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_afcfd2fc4859336fbbcb68b15bfac7ca1_icgraph" id="class_apns_p_h_p___push_afcfd2fc4859336fbbcb68b15bfac7ca1_icgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___push.html#ac018cd9443834d169616e64dbd91795b" title="Adds a message to the message queue. " alt="" coords="166,5,205,27"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a381cee411cee3e7d1c3220fa45d47eb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array _parseErrorMessage </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$sErrorMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parses the error message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$sErrorMessage</td><td>The Error Message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Array with command, statusCode and identifier keys. </dd></dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00281">281</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00293">_readErrorMessage()</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> unpack(<span class="stringliteral">&#39;Ccommand/CstatusCode/Nidentifier&#39;</span>, $sErrorMessage);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_a381cee411cee3e7d1c3220fa45d47eb2_icgraph.png" border="0" usemap="#class_apns_p_h_p___push_a381cee411cee3e7d1c3220fa45d47eb2_icgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_a381cee411cee3e7d1c3220fa45d47eb2_icgraph" id="class_apns_p_h_p___push_a381cee411cee3e7d1c3220fa45d47eb2_icgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___push.html#a2fe538ea4442f608db7f2c54948eb6ab" title="Reads an error message (if present) from the main stream. " alt="" coords="160,5,261,27"/><area shape="rect" id="node3" href="class_apns_p_h_p___push.html#a6242fa2edfb97a92aea050f0f119da7d" title="Checks for error message and deletes messages successfully sent from message queue. " alt="" coords="309,5,392,27"/><area shape="rect" id="node4" href="class_apns_p_h_p___push.html#ae9399f5ec7881c5d18173def8068108e" title="Sends all messages in the message queue to Apple Push Notification Service. " alt="" coords="441,5,482,27"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2fe538ea4442f608db7f2c54948eb6ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array null _readErrorMessage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads an error message (if present) from the main stream. </p>
<p>If the error message is present and valid the error message is returned, otherwhise null is returned.</p>
<dl class="section return"><dt>Returns</dt><dd>Return the error message array. </dd></dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00293">293</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>References <a class="el" href="_push_8php_source.html#l00281">_parseErrorMessage()</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00327">_updateQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        $sErrorResponse = @fread($this-&gt;_hSocket, self::ERROR_RESPONSE_SIZE);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">if</span> ($sErrorResponse === <span class="keyword">false</span> || strlen($sErrorResponse) != self::ERROR_RESPONSE_SIZE) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        $aErrorResponse = $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#a381cee411cee3e7d1c3220fa45d47eb2">_parseErrorMessage</a>($sErrorResponse);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">if</span> (!is_array($aErrorResponse) || empty($aErrorResponse)) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">if</span> (!isset($aErrorResponse[<span class="stringliteral">&#39;command&#39;</span>], $aErrorResponse[<span class="stringliteral">&#39;statusCode&#39;</span>], $aErrorResponse[<span class="stringliteral">&#39;identifier&#39;</span>])) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> ($aErrorResponse[<span class="stringliteral">&#39;command&#39;</span>] != self::ERROR_RESPONSE_COMMAND) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        $aErrorResponse[<span class="stringliteral">&#39;time&#39;</span>] = time();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        $aErrorResponse[<span class="stringliteral">&#39;statusMessage&#39;</span>] = <span class="stringliteral">&#39;None (unknown)&#39;</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span> (isset($this-&gt;_aErrorResponseMessages[$aErrorResponse[<span class="stringliteral">&#39;statusCode&#39;</span>]])) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            $aErrorResponse[<span class="stringliteral">&#39;statusMessage&#39;</span>] = $this-&gt;_aErrorResponseMessages[$aErrorResponse[<span class="stringliteral">&#39;statusCode&#39;</span>]];</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">return</span> $aErrorResponse;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___push_html_a381cee411cee3e7d1c3220fa45d47eb2"><div class="ttname"><a href="class_apns_p_h_p___push.html#a381cee411cee3e7d1c3220fa45d47eb2">ApnsPHP_Push\_parseErrorMessage</a></div><div class="ttdeci">array _parseErrorMessage(string $sErrorMessage)</div><div class="ttdoc">Parses the error message. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00281">Push.php:281</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_cgraph.png" border="0" usemap="#class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_cgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_cgraph" id="class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_cgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___push.html#a381cee411cee3e7d1c3220fa45d47eb2" title="Parses the error message. " alt="" coords="155,5,261,27"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_icgraph.png" border="0" usemap="#class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_icgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_icgraph" id="class_apns_p_h_p___push_a2fe538ea4442f608db7f2c54948eb6ab_icgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___push.html#a6242fa2edfb97a92aea050f0f119da7d" title="Checks for error message and deletes messages successfully sent from message queue. " alt="" coords="155,5,237,27"/><area shape="rect" id="node3" href="class_apns_p_h_p___push.html#ae9399f5ec7881c5d18173def8068108e" title="Sends all messages in the message queue to Apple Push Notification Service. " alt="" coords="286,5,327,27"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af366dce8b0b73dc941f0178795ea8547"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _removeMessageFromQueue </td>
          <td>(</td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>$nMessageID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>$bError</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a message from the message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$nMessageID</td><td>The Message ID. </td></tr>
    <tr><td class="paramname">$bError</td><td>[optional] Insert the message in the Error container. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_apns_p_h_p___push___exception.html" title="Exception class. ">ApnsPHP_Push_Exception</a></td><td>if the Message ID is not valid or message does not exists. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00371">371</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00120">send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (!is_numeric($nMessageID) || $nMessageID &lt;= 0) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_apns_p_h_p___push___exception.html">ApnsPHP_Push_Exception</a>(</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="stringliteral">&#39;Message ID format is not valid.&#39;</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            );</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> (!isset($this-&gt;_aMessageQueue[$nMessageID])) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_apns_p_h_p___push___exception.html">ApnsPHP_Push_Exception</a>(</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                <span class="stringliteral">&quot;The Message ID {$nMessageID} does not exists.&quot;</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            );</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> ($bError) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            $this-&gt;_aErrors[$nMessageID] = $this-&gt;_aMessageQueue[$nMessageID];</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        unset($this-&gt;_aMessageQueue[$nMessageID]);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___push___exception_html"><div class="ttname"><a href="class_apns_p_h_p___push___exception.html">ApnsPHP_Push_Exception</a></div><div class="ttdoc">Exception class. </div><div class="ttdef"><b>Definition:</b> <a href="_push_2_exception_8php_source.html#l00025">Push/Exception.php:25</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_af366dce8b0b73dc941f0178795ea8547_icgraph.png" border="0" usemap="#class_apns_p_h_p___push_af366dce8b0b73dc941f0178795ea8547_icgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_af366dce8b0b73dc941f0178795ea8547_icgraph" id="class_apns_p_h_p___push_af366dce8b0b73dc941f0178795ea8547_icgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___push.html#ae9399f5ec7881c5d18173def8068108e" title="Sends all messages in the message queue to Apple Push Notification Service. " alt="" coords="193,5,234,27"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6242fa2edfb97a92aea050f0f119da7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean _updateQueue </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$aErrorMessage</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks for error message and deletes messages successfully sent from message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$aErrorMessage</td><td>[optional] The error message. It will anyway always be read from the main stream. The latest successful message sent is the lowest between this error message and the message that was read from the main stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="class_apns_p_h_p___push.html#a2fe538ea4442f608db7f2c54948eb6ab" title="Reads an error message (if present) from the main stream. ">_readErrorMessage()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>True if an error was received. </dd></dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00327">327</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>References <a class="el" href="_abstract_8php_source.html#l00414">ApnsPHP_Abstract\_log()</a>, <a class="el" href="_push_8php_source.html#l00293">_readErrorMessage()</a>, <a class="el" href="_abstract_8php_source.html#l00328">ApnsPHP_Abstract\connect()</a>, and <a class="el" href="_abstract_8php_source.html#l00356">ApnsPHP_Abstract\disconnect()</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00120">send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        $aStreamErrorMessage = $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#a2fe538ea4442f608db7f2c54948eb6ab">_readErrorMessage</a>();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">if</span> (!isset($aErrorMessage) &amp;&amp; !isset($aStreamErrorMessage)) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isset($aErrorMessage, $aStreamErrorMessage)) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">if</span> ($aStreamErrorMessage[<span class="stringliteral">&#39;identifier&#39;</span>] &lt;= $aErrorMessage[<span class="stringliteral">&#39;identifier&#39;</span>]) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                $aErrorMessage = $aStreamErrorMessage;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                unset($aStreamErrorMessage);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isset($aErrorMessage) &amp;&amp; isset($aStreamErrorMessage)) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            $aErrorMessage = $aStreamErrorMessage;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            unset($aStreamErrorMessage);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a>(<span class="stringliteral">&#39;ERROR: Unable to send message ID &#39;</span> .</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            $aErrorMessage[<span class="stringliteral">&#39;identifier&#39;</span>] . <span class="stringliteral">&#39;: &#39;</span> .</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            $aErrorMessage[<span class="stringliteral">&#39;statusMessage&#39;</span>] . <span class="stringliteral">&#39; (&#39;</span> . $aErrorMessage[<span class="stringliteral">&#39;statusCode&#39;</span>] . <span class="stringliteral">&#39;).&#39;</span>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a7df1b1c18902634d60f5fb06d3c5f4a9">disconnect</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">foreach</span>($this-&gt;_aMessageQueue as $k =&gt; &amp;$aMessage) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">if</span> ($k &lt; $aErrorMessage[<span class="stringliteral">&#39;identifier&#39;</span>]) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                unset($this-&gt;_aMessageQueue[$k]);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($k == $aErrorMessage[<span class="stringliteral">&#39;identifier&#39;</span>]) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                $aMessage[<span class="stringliteral">&#39;ERRORS&#39;</span>][] = $aErrorMessage;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a1396bf9b5defe9fa844a63b5cd40ac0e">connect</a>();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___push_html_a2fe538ea4442f608db7f2c54948eb6ab"><div class="ttname"><a href="class_apns_p_h_p___push.html#a2fe538ea4442f608db7f2c54948eb6ab">ApnsPHP_Push\_readErrorMessage</a></div><div class="ttdeci">array null _readErrorMessage()</div><div class="ttdoc">Reads an error message (if present) from the main stream. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00293">Push.php:293</a></div></div>
<div class="ttc" id="class_apns_p_h_p___abstract_html_a1396bf9b5defe9fa844a63b5cd40ac0e"><div class="ttname"><a href="class_apns_p_h_p___abstract.html#a1396bf9b5defe9fa844a63b5cd40ac0e">ApnsPHP_Abstract\connect</a></div><div class="ttdeci">void connect()</div><div class="ttdoc">Connects to Apple Push Notification service server. </div><div class="ttdef"><b>Definition:</b> <a href="_abstract_8php_source.html#l00328">Abstract.php:328</a></div></div>
<div class="ttc" id="class_apns_p_h_p___abstract_html_a7df1b1c18902634d60f5fb06d3c5f4a9"><div class="ttname"><a href="class_apns_p_h_p___abstract.html#a7df1b1c18902634d60f5fb06d3c5f4a9">ApnsPHP_Abstract\disconnect</a></div><div class="ttdeci">boolean disconnect()</div><div class="ttdoc">Disconnects from Apple Push Notifications service server. </div><div class="ttdef"><b>Definition:</b> <a href="_abstract_8php_source.html#l00356">Abstract.php:356</a></div></div>
<div class="ttc" id="class_apns_p_h_p___abstract_html_a6e9fdc68fece1907733a1e76f667622f"><div class="ttname"><a href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">ApnsPHP_Abstract\_log</a></div><div class="ttdeci">void _log(string $sMessage)</div><div class="ttdoc">Logs a message through the Logger. </div><div class="ttdef"><b>Definition:</b> <a href="_abstract_8php_source.html#l00414">Abstract.php:414</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_cgraph.png" border="0" usemap="#class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_cgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_cgraph" id="class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_cgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f" title="Logs a message through the Logger. " alt="" coords="515,125,634,147"/><area shape="rect" id="node3" href="class_apns_p_h_p___push.html#a2fe538ea4442f608db7f2c54948eb6ab" title="Reads an error message (if present) from the main stream. " alt="" coords="153,51,255,74"/><area shape="rect" id="node5" href="class_apns_p_h_p___abstract.html#a1396bf9b5defe9fa844a63b5cd40ac0e" title="Connects to Apple Push Notification service server. " alt="" coords="137,99,271,122"/><area shape="rect" id="node7" href="class_apns_p_h_p___abstract.html#a7df1b1c18902634d60f5fb06d3c5f4a9" title="Disconnects from Apple Push Notifications service server. " alt="" coords="321,195,466,218"/><area shape="rect" id="node4" href="class_apns_p_h_p___push.html#a381cee411cee3e7d1c3220fa45d47eb2" title="Parses the error message. " alt="" coords="341,50,446,73"/><area shape="rect" id="node6" href="class_apns_p_h_p___abstract.html#a56e16b11db21be37c5f50850d287ff21" title="Connects to Apple Push Notification service server. " alt="" coords="324,149,463,171"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_icgraph.png" border="0" usemap="#class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_icgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_icgraph" id="class_apns_p_h_p___push_a6242fa2edfb97a92aea050f0f119da7d_icgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___push.html#ae9399f5ec7881c5d18173def8068108e" title="Sends all messages in the message queue to Apple Push Notification Service. " alt="" coords="137,5,178,27"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac018cd9443834d169616e64dbd91795b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_apns_p_h_p___message.html">ApnsPHP_Message</a>&#160;</td>
          <td class="paramname"><em>$message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a message to the message queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$message</td><td>The message. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00093">93</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>References <a class="el" href="_push_8php_source.html#l00263">_getBinaryNotification()</a>, <a class="el" href="_message_8php_source.html#l00458">ApnsPHP_Message\getExpiry()</a>, <a class="el" href="_message_8php_source.html#l00397">ApnsPHP_Message\getPayload()</a>, <a class="el" href="_message_8php_source.html#l00092">ApnsPHP_Message\getRecipient()</a>, and <a class="el" href="_message_8php_source.html#l00107">ApnsPHP_Message\getRecipientsNumber()</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        $sMessagePayload = $message-&gt;<a class="code" href="class_apns_p_h_p___message.html#a078da3f5c17bd3a909a6d46af58b4879">getPayload</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        $nRecipients = $message-&gt;<a class="code" href="class_apns_p_h_p___message.html#ae6c898739424a186c74c6d8541fbb5f5">getRecipientsNumber</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        $nMessageQueueLen = count($this-&gt;_aMessageQueue);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">for</span> ($i = 0; $i &lt; $nRecipients; $i++) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            $nMessageID = $nMessageQueueLen + $i + 1;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            $this-&gt;_aMessageQueue[$nMessageID] = array(</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="stringliteral">&#39;MESSAGE&#39;</span> =&gt; $message,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <span class="stringliteral">&#39;BINARY_NOTIFICATION&#39;</span> =&gt; $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#afcfd2fc4859336fbbcb68b15bfac7ca1">_getBinaryNotification</a>(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    $message-&gt;<a class="code" href="class_apns_p_h_p___message.html#a46f33ab42d194e1b7a108f2fb287627b">getRecipient</a>($i),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    $sMessagePayload,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    $nMessageID,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    $message-&gt;<a class="code" href="class_apns_p_h_p___message.html#a7f95765acd4da6daa3b26a50906d49c9">getExpiry</a>()</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                ),</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="stringliteral">&#39;ERRORS&#39;</span> =&gt; array()</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            );</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___message_html_ae6c898739424a186c74c6d8541fbb5f5"><div class="ttname"><a href="class_apns_p_h_p___message.html#ae6c898739424a186c74c6d8541fbb5f5">ApnsPHP_Message\getRecipientsNumber</a></div><div class="ttdeci">integer getRecipientsNumber()</div><div class="ttdoc">Get the number of recipients. </div><div class="ttdef"><b>Definition:</b> <a href="_message_8php_source.html#l00107">Message.php:107</a></div></div>
<div class="ttc" id="class_apns_p_h_p___message_html_a078da3f5c17bd3a909a6d46af58b4879"><div class="ttname"><a href="class_apns_p_h_p___message.html#a078da3f5c17bd3a909a6d46af58b4879">ApnsPHP_Message\getPayload</a></div><div class="ttdeci">string getPayload()</div><div class="ttdoc">Convert the message in a JSON-encoded payload. </div><div class="ttdef"><b>Definition:</b> <a href="_message_8php_source.html#l00397">Message.php:397</a></div></div>
<div class="ttc" id="class_apns_p_h_p___message_html_a46f33ab42d194e1b7a108f2fb287627b"><div class="ttname"><a href="class_apns_p_h_p___message.html#a46f33ab42d194e1b7a108f2fb287627b">ApnsPHP_Message\getRecipient</a></div><div class="ttdeci">string getRecipient(integer $nRecipient=0)</div><div class="ttdoc">Get a recipient. </div><div class="ttdef"><b>Definition:</b> <a href="_message_8php_source.html#l00092">Message.php:92</a></div></div>
<div class="ttc" id="class_apns_p_h_p___push_html_afcfd2fc4859336fbbcb68b15bfac7ca1"><div class="ttname"><a href="class_apns_p_h_p___push.html#afcfd2fc4859336fbbcb68b15bfac7ca1">ApnsPHP_Push\_getBinaryNotification</a></div><div class="ttdeci">string _getBinaryNotification(string $sDeviceToken, string $sPayload, integer $nMessageID=0, integer $nExpire=604800)</div><div class="ttdoc">Generate a binary notification from a device token and a JSON-encoded payload. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00263">Push.php:263</a></div></div>
<div class="ttc" id="class_apns_p_h_p___message_html_a7f95765acd4da6daa3b26a50906d49c9"><div class="ttname"><a href="class_apns_p_h_p___message.html#a7f95765acd4da6daa3b26a50906d49c9">ApnsPHP_Message\getExpiry</a></div><div class="ttdeci">integer getExpiry()</div><div class="ttdoc">Get the expiry value. </div><div class="ttdef"><b>Definition:</b> <a href="_message_8php_source.html#l00458">Message.php:458</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_ac018cd9443834d169616e64dbd91795b_cgraph.png" border="0" usemap="#class_apns_p_h_p___push_ac018cd9443834d169616e64dbd91795b_cgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_ac018cd9443834d169616e64dbd91795b_cgraph" id="class_apns_p_h_p___push_ac018cd9443834d169616e64dbd91795b_cgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___push.html#afcfd2fc4859336fbbcb68b15bfac7ca1" title="Generate a binary notification from a device token and a JSON&#45;encoded payload. " alt="" coords="118,5,229,27"/><area shape="rect" id="node3" href="class_apns_p_h_p___message.html#a7f95765acd4da6daa3b26a50906d49c9" title="Get the expiry value. " alt="" coords="103,51,243,74"/><area shape="rect" id="node4" href="class_apns_p_h_p___message.html#a078da3f5c17bd3a909a6d46af58b4879" title="Convert the message in a JSON&#45;encoded payload. " alt="" coords="99,98,247,121"/><area shape="rect" id="node6" href="class_apns_p_h_p___message.html#a46f33ab42d194e1b7a108f2fb287627b" title="Get a recipient. " alt="" coords="96,145,251,167"/><area shape="rect" id="node7" href="class_apns_p_h_p___message.html#ae6c898739424a186c74c6d8541fbb5f5" title="Get the number of recipients. " alt="" coords="94,191,253,225"/><area shape="rect" id="node5" href="class_apns_p_h_p___message.html#a53ac522f77fabca771da91294220be5d" title="Get the payload dictionary. " alt="" coords="302,98,455,121"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a768eb6c89cb999d16b9469ca584d7ce9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">array getErrors </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>$bEmpty</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns messages not delivered to the end user because one (or more) error occurred. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$bEmpty</td><td>[optional] Empty message container. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Array of messages not delivered because one or more errors occurred. </dd></dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00240">240</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>References <a class="el" href="_push_8php_source.html#l00063">$_aErrors</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        $aRet = <a class="code" href="class_apns_p_h_p___push.html#a7a71aa0cf11f9c55a9dc641891e60e20">$this-&gt;_aErrors</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">if</span> ($bEmpty) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            $this-&gt;_aErrors = array();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">return</span> $aRet;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___push_html_a7a71aa0cf11f9c55a9dc641891e60e20"><div class="ttname"><a href="class_apns_p_h_p___push.html#a7a71aa0cf11f9c55a9dc641891e60e20">ApnsPHP_Push\$_aErrors</a></div><div class="ttdeci">array $_aErrors</div><div class="ttdoc">Error container. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00063">Push.php:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28cb5e78a1805b9a1b643142033dc23b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">array getQueue </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>$bEmpty</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns messages in the message queue. </p>
<p>When a message is successful sent or reached the maximum retry time is removed from the message queue and inserted in the Errors container. Use the <a class="el" href="class_apns_p_h_p___push.html#a768eb6c89cb999d16b9469ca584d7ce9" title="Returns messages not delivered to the end user because one (or more) error occurred. ">getErrors()</a> method to retrive messages with delivery error(s).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$bEmpty</td><td>[optional] Empty message queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Array of messages left on the queue. </dd></dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00223">223</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>References <a class="el" href="_push_8php_source.html#l00062">$_aMessageQueue</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        $aRet = <a class="code" href="class_apns_p_h_p___push.html#a1719189fd0c52f6747cbafa055260d19">$this-&gt;_aMessageQueue</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">if</span> ($bEmpty) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            $this-&gt;_aMessageQueue = array();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span> $aRet;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___push_html_a1719189fd0c52f6747cbafa055260d19"><div class="ttname"><a href="class_apns_p_h_p___push.html#a1719189fd0c52f6747cbafa055260d19">ApnsPHP_Push\$_aMessageQueue</a></div><div class="ttdeci">array $_aMessageQueue</div><div class="ttdoc">Message queue. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00062">Push.php:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a913c8a2582c6ede80899a6ef079745d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer getSendRetryTimes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the send retry time value. </p>
<dl class="section return"><dt>Returns</dt><dd>Send retry times. </dd></dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00083">83</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>References <a class="el" href="_push_8php_source.html#l00055">$_nSendRetryTimes</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_apns_p_h_p___push.html#a9dd53899bb322e9601a2a91a85b49aa8">$this-&gt;_nSendRetryTimes</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___push_html_a9dd53899bb322e9601a2a91a85b49aa8"><div class="ttname"><a href="class_apns_p_h_p___push.html#a9dd53899bb322e9601a2a91a85b49aa8">ApnsPHP_Push\$_nSendRetryTimes</a></div><div class="ttdeci">integer $_nSendRetryTimes</div><div class="ttdoc">Send retry times. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00055">Push.php:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae9399f5ec7881c5d18173def8068108e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends all messages in the message queue to Apple Push Notification Service. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_apns_p_h_p___push___exception.html" title="Exception class. ">ApnsPHP_Push_Exception</a></td><td>if not connected to the service or no notification queued. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00120">120</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>References <a class="el" href="_abstract_8php_source.html#l00414">ApnsPHP_Abstract\_log()</a>, <a class="el" href="_push_8php_source.html#l00371">_removeMessageFromQueue()</a>, and <a class="el" href="_push_8php_source.html#l00327">_updateQueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">if</span> (!$this-&gt;_hSocket) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_apns_p_h_p___push___exception.html">ApnsPHP_Push_Exception</a>(</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <span class="stringliteral">&#39;Not connected to Push Notification Service&#39;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span> (empty($this-&gt;_aMessageQueue)) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_apns_p_h_p___push___exception.html">ApnsPHP_Push_Exception</a>(</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                <span class="stringliteral">&#39;No notifications queued to be sent&#39;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        $this-&gt;_aErrors = array();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        $nRun = 1;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">while</span> (($nMessages = count($this-&gt;_aMessageQueue)) &gt; 0) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a>(<span class="stringliteral">&quot;INFO: Sending messages queue, run #{$nRun}: $nMessages message(s) left in queue.&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            $bError = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">foreach</span>($this-&gt;_aMessageQueue as $k =&gt; &amp;$aMessage) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;pcntl_signal_dispatch&#39;</span>)) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                    pcntl_signal_dispatch();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                $message = $aMessage[<span class="stringliteral">&#39;MESSAGE&#39;</span>];</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                $sCustomIdentifier = (string)$message-&gt;getCustomIdentifier();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                $sCustomIdentifier = sprintf(<span class="stringliteral">&#39;[custom identifier: %s]&#39;</span>, empty($sCustomIdentifier) ? <span class="stringliteral">&#39;unset&#39;</span> : $sCustomIdentifier);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                $nErrors = 0;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">if</span> (!empty($aMessage[<span class="stringliteral">&#39;ERRORS&#39;</span>])) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="keywordflow">foreach</span>($aMessage[<span class="stringliteral">&#39;ERRORS&#39;</span>] as $aError) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                        <span class="keywordflow">if</span> ($aError[<span class="stringliteral">&#39;statusCode&#39;</span>] == 0) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                            $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a>(<span class="stringliteral">&quot;INFO: Message ID {$k} {$sCustomIdentifier} has no error ({$aError[&#39;statusCode&#39;]}), removing from queue...&quot;</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                            $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#af366dce8b0b73dc941f0178795ea8547">_removeMessageFromQueue</a>($k);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                            <span class="keywordflow">continue</span> 2;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($aError[<span class="stringliteral">&#39;statusCode&#39;</span>] &gt; 1 &amp;&amp; $aError[<span class="stringliteral">&#39;statusCode&#39;</span>] &lt;= 8) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                            $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a>(<span class="stringliteral">&quot;WARNING: Message ID {$k} {$sCustomIdentifier} has an unrecoverable error ({$aError[&#39;statusCode&#39;]}), removing from queue without retrying...&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                            $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#af366dce8b0b73dc941f0178795ea8547">_removeMessageFromQueue</a>($k, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                            <span class="keywordflow">continue</span> 2;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                        }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    <span class="keywordflow">if</span> (($nErrors = count($aMessage[<span class="stringliteral">&#39;ERRORS&#39;</span>])) &gt;= $this-&gt;_nSendRetryTimes) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a>(</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                            <span class="stringliteral">&quot;WARNING: Message ID {$k} {$sCustomIdentifier} has {$nErrors} errors, removing from queue...&quot;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                        $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#af366dce8b0b73dc941f0178795ea8547">_removeMessageFromQueue</a>($k, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                $nLen = strlen($aMessage[<span class="stringliteral">&#39;BINARY_NOTIFICATION&#39;</span>]);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a>(<span class="stringliteral">&quot;STATUS: Sending message ID {$k} {$sCustomIdentifier} (&quot;</span> . ($nErrors + 1) . <span class="stringliteral">&quot;/{$this-&gt;_nSendRetryTimes}): {$nLen} bytes.&quot;</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                $aErrorMessage = null;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordflow">if</span> ($nLen !== ($nWritten = (<span class="keywordtype">int</span>)@fwrite($this-&gt;_hSocket, $aMessage[<span class="stringliteral">&#39;BINARY_NOTIFICATION&#39;</span>]))) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                    $aErrorMessage = array(</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        <span class="stringliteral">&#39;identifier&#39;</span> =&gt; $k,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        <span class="stringliteral">&#39;statusCode&#39;</span> =&gt; self::STATUS_CODE_INTERNAL_ERROR,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                        <span class="stringliteral">&#39;statusMessage&#39;</span> =&gt; sprintf(<span class="stringliteral">&#39;%s (%d bytes written instead of %d bytes)&#39;</span>,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                            $this-&gt;_aErrorResponseMessages[self::STATUS_CODE_INTERNAL_ERROR], $nWritten, $nLen</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                        )</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                usleep($this-&gt;_nWriteInterval);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                $bError = $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#a6242fa2edfb97a92aea050f0f119da7d">_updateQueue</a>($aErrorMessage);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">if</span> ($bError) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span> (!$bError) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                $read = array($this-&gt;_hSocket);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                $null = NULL;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                $nChangedStreams = @stream_select($read, $null, $null, 0, $this-&gt;_nSocketSelectTimeout);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="keywordflow">if</span> ($nChangedStreams === <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    $this-&gt;<a class="code" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">_log</a>(<span class="stringliteral">&#39;ERROR: Unable to wait for a stream availability.&#39;</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($nChangedStreams &gt; 0) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    $bError = $this-&gt;<a class="code" href="class_apns_p_h_p___push.html#a6242fa2edfb97a92aea050f0f119da7d">_updateQueue</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    <span class="keywordflow">if</span> (!$bError) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        $this-&gt;_aMessageQueue = array();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    $this-&gt;_aMessageQueue = array();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            $nRun++;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="ttc" id="class_apns_p_h_p___push_html_af366dce8b0b73dc941f0178795ea8547"><div class="ttname"><a href="class_apns_p_h_p___push.html#af366dce8b0b73dc941f0178795ea8547">ApnsPHP_Push\_removeMessageFromQueue</a></div><div class="ttdeci">void _removeMessageFromQueue(integer $nMessageID, boolean $bError=false)</div><div class="ttdoc">Remove a message from the message queue. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00371">Push.php:371</a></div></div>
<div class="ttc" id="class_apns_p_h_p___abstract_html_a6e9fdc68fece1907733a1e76f667622f"><div class="ttname"><a href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f">ApnsPHP_Abstract\_log</a></div><div class="ttdeci">void _log(string $sMessage)</div><div class="ttdoc">Logs a message through the Logger. </div><div class="ttdef"><b>Definition:</b> <a href="_abstract_8php_source.html#l00414">Abstract.php:414</a></div></div>
<div class="ttc" id="class_apns_p_h_p___push___exception_html"><div class="ttname"><a href="class_apns_p_h_p___push___exception.html">ApnsPHP_Push_Exception</a></div><div class="ttdoc">Exception class. </div><div class="ttdef"><b>Definition:</b> <a href="_push_2_exception_8php_source.html#l00025">Push/Exception.php:25</a></div></div>
<div class="ttc" id="class_apns_p_h_p___push_html_a6242fa2edfb97a92aea050f0f119da7d"><div class="ttname"><a href="class_apns_p_h_p___push.html#a6242fa2edfb97a92aea050f0f119da7d">ApnsPHP_Push\_updateQueue</a></div><div class="ttdeci">boolean _updateQueue(array $aErrorMessage=null)</div><div class="ttdoc">Checks for error message and deletes messages successfully sent from message queue. </div><div class="ttdef"><b>Definition:</b> <a href="_push_8php_source.html#l00327">Push.php:327</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_apns_p_h_p___push_ae9399f5ec7881c5d18173def8068108e_cgraph.png" border="0" usemap="#class_apns_p_h_p___push_ae9399f5ec7881c5d18173def8068108e_cgraph" alt=""/></div>
<map name="class_apns_p_h_p___push_ae9399f5ec7881c5d18173def8068108e_cgraph" id="class_apns_p_h_p___push_ae9399f5ec7881c5d18173def8068108e_cgraph">
<area shape="rect" id="node2" href="class_apns_p_h_p___abstract.html#a6e9fdc68fece1907733a1e76f667622f" title="Logs a message through the Logger. " alt="" coords="662,130,781,152"/><area shape="rect" id="node3" href="class_apns_p_h_p___push.html#af366dce8b0b73dc941f0178795ea8547" title="Remove a message from the message queue. " alt="" coords="96,32,235,55"/><area shape="rect" id="node4" href="class_apns_p_h_p___push.html#a6242fa2edfb97a92aea050f0f119da7d" title="Checks for error message and deletes messages successfully sent from message queue. " alt="" coords="124,80,207,103"/><area shape="rect" id="node5" href="class_apns_p_h_p___push.html#a2fe538ea4442f608db7f2c54948eb6ab" title="Reads an error message (if present) from the main stream. " alt="" coords="300,80,401,103"/><area shape="rect" id="node7" href="class_apns_p_h_p___abstract.html#a1396bf9b5defe9fa844a63b5cd40ac0e" title="Connects to Apple Push Notification service server. " alt="" coords="283,130,418,152"/><area shape="rect" id="node9" href="class_apns_p_h_p___abstract.html#a7df1b1c18902634d60f5fb06d3c5f4a9" title="Disconnects from Apple Push Notifications service server. " alt="" coords="467,226,613,248"/><area shape="rect" id="node6" href="class_apns_p_h_p___push.html#a381cee411cee3e7d1c3220fa45d47eb2" title="Parses the error message. " alt="" coords="487,80,593,103"/><area shape="rect" id="node8" href="class_apns_p_h_p___abstract.html#a56e16b11db21be37c5f50850d287ff21" title="Connects to Apple Push Notification service server. " alt="" coords="471,179,609,202"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4fc1ec1138b9f16f3133031875c7dcb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setSendRetryTimes </td>
          <td>(</td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>$nRetryTimes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the send retry times value. </p>
<p>If the client is unable to send a payload to to the server retries at least for this value. The default send retry times is 3.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$nRetryTimes</td><td>Send retry times. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00073">73</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        $this-&gt;_nSendRetryTimes = (int)$nRetryTimes;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="aafc113ef872b9af567ea2a1efa246c1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">$_aErrorResponseMessages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= array(</div>
<div class="line">        0   =&gt; <span class="stringliteral">&#39;No errors encountered&#39;</span>,</div>
<div class="line">        1   =&gt; <span class="stringliteral">&#39;Processing error&#39;</span>,</div>
<div class="line">        2   =&gt; <span class="stringliteral">&#39;Missing device token&#39;</span>,</div>
<div class="line">        3   =&gt; <span class="stringliteral">&#39;Missing topic&#39;</span>,</div>
<div class="line">        4   =&gt; <span class="stringliteral">&#39;Missing payload&#39;</span>,</div>
<div class="line">        5   =&gt; <span class="stringliteral">&#39;Invalid token size&#39;</span>,</div>
<div class="line">        6   =&gt; <span class="stringliteral">&#39;Invalid topic size&#39;</span>,</div>
<div class="line">        7   =&gt; <span class="stringliteral">&#39;Invalid payload size&#39;</span>,</div>
<div class="line">        8   =&gt; <span class="stringliteral">&#39;Invalid token&#39;</span>,</div>
<div class="line">        self::STATUS_CODE_INTERNAL_ERROR =&gt; <span class="stringliteral">&#39;Internal error&#39;</span></div>
<div class="line">    )</div>
</div><!-- fragment -->
<p><b>array</b> Error-response messages. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00042">42</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

</div>
</div>
<a class="anchor" id="a7a71aa0cf11f9c55a9dc641891e60e20"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $_aErrors = array()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Error container. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00063">63</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00240">getErrors()</a>.</p>

</div>
</div>
<a class="anchor" id="a1719189fd0c52f6747cbafa055260d19"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $_aMessageQueue = array()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Message queue. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00062">62</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00223">getQueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a109431534e6d7a411266096a7c79cf17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">$_aServiceURLs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= array(</div>
<div class="line">        <span class="stringliteral">&#39;tls://gateway.push.apple.com:2195&#39;</span>, </div>
<div class="line">        <span class="stringliteral">&#39;tls://gateway.sandbox.push.apple.com:2195&#39;</span> </div>
<div class="line">    )</div>
</div><!-- fragment -->
<p><b>array</b> Service URLs environments. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00057">57</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9dd53899bb322e9601a2a91a85b49aa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer $_nSendRetryTimes = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send retry times. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00055">55</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

<p>Referenced by <a class="el" href="_push_8php_source.html#l00083">getSendRetryTimes()</a>.</p>

</div>
</div>
<a class="anchor" id="a74b57f63d77ece5116b5182aa34c9730"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const COMMAND_PUSH = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>integer</b> Payload command. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00035">35</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab55825cc178fc59b660002acd8d5a116"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ERROR_RESPONSE_COMMAND = 8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>integer</b> Error-response command code. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00038">38</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad38bede6deb2536cc02d28f08beba41f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ERROR_RESPONSE_SIZE = 6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>integer</b> Error-response packet size. </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00037">37</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

</div>
</div>
<a class="anchor" id="a0991482ec58935b62b607561f469b3e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const STATUS_CODE_INTERNAL_ERROR = 999</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><b>integer</b> Status code for internal error (not Apple). </p>

<p>Definition at line <a class="el" href="_push_8php_source.html#l00040">40</a> of file <a class="el" href="_push_8php_source.html">Push.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_push_8php_source.html">Push.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_apns_p_h_p___push.html">ApnsPHP_Push</a></li>
    <li class="footer">Generated on Tue May 12 2015 18:20:30 for apns-php by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
